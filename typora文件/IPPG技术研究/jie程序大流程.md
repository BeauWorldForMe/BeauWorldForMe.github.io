+ experimental.PPG_process20200910_face.py
  + 568行 `if __name__ == '__main__':`
  
  + 计时间 datetime.now()
  
    + “从time.time（）和可选的时区信息构造日期时间。”
  
    + ```python
      _time.time()
      ```
  
      + 该模块提供各种功能来操纵时间值。
      + 有两种标准的时间表示形式。 
      + 一个是数字自大纪元以来的秒数，以UTC（又称格林尼治标准时间）表示。 可以是整数
        或浮点数（代表秒的分数）。时代是系统定义的； 在Unix上，通常是1970年1月1日。
        可以通过调用gmtime（0）来检索实际值。
      + 另一种表示形式是9个整数的元组，给出本地时间。元组项目为：
           年（包括世纪，例如1998年）
           月（1-12）
           天（1-31）
           小时（0-23）
           分钟（0-59）
           秒（0-59）
           工作日（0-6，星期一为0）
           儒略日（一年中的一日，1-366）
           DST（夏令时）标志（-1、0或1）
        如果DST标志为0，则时间在常规时区中给出；
        如果为1，则时间在DST时区中给出；
        如果为-1，则mktime（）应该基于日期和时间进行猜测。
    
  + deepcopy (path)
  
  + sorted(pathdir, key=lambda x: int(x))
  
    + sort 是应用在 list 上的方法，sorted 可以对所有可迭代的对象进行排序操作。
    + list 的 sort 方法返回的是对已经存在的列表进行操作，而内建函数 sorted 方法返回的是一个新的 list，而不是在原来的基础上进行的操作。
    + iterable -- 可迭代对象。
    + key -- 主要是用来进行比较的元素，只有一个参数，具体的函数的参数就是取自于可迭代对象中，指定可迭代对象中的一个元素来进行排序。
    + reverse -- 排序规则，reverse = True 降序 ， reverse = False 升序（默认）。
  
  + dir_record_analysis(recent_sequence_path,cal_ptt = cal_ptt)
  
    + run("G:full_face.jpg", cal_ptt = cal_ptt) 对第一张图使用run()函数
      
    + return_new_cen(img_path)
      
        + points = return_list(img_path) # 找到81个面部特征界标
        
          + ###### 自定义形状预测器模型经过训练，可以在给定任何图像的情况下找到81个面部特征界标
      
    + ptt(t, rois, fps, low, high)
    
      + 进行到ptt_0918的参数
    
  + cal_spo2("I:\\1\\250668997543202816") # 热力图，根据相关性来算的
  
  + main_process(img_path,FPS = 20,LEN=LEN-1,cal_ptt = True, cal_ptt_data = cal_ptt_data)
  
    + ```python
      # Show = False
      Show = True
      ```
  
    + """step1: load data from img path"""
      + ```python
        loadAllData（）
        ```
  
    + """step2: get a reference region and gain ppg data"""
  
      + ```python
        SegData(DataAll, t1, indX, indY, show=Show) # original
        ```
  
    + """Data_resample_mean"""
  
      + ```python
        Data_resample_mean(Data, t1, fps=FPS, resample=False, resamplerate=40, show=Show) #discard outlier 丢弃离群值
        ```
  
    + """Filter out low frequency changes"""
  
    + ....略
  
    + 
  

### 结果参数

{'hr': array([ 0.09164298, -0.06678735, -0.18042632, -0.2446867 , -0.27904459,
       -0.28223473, -0.23639228, -0.14229753, -0.01539969,  0.13408546,
        0.29075351,  0.41301309,  0.44109183,  0.34784059,  0.1787659 ,
        0.01269662, -0.11138757, -0.2012444 , -0.26823549, -0.31061196,
       -0.31646996, -0.26730138, -0.16217164, -0.03077069,  0.10347377,
        0.24180849,  0.35842817,  0.38366281,  0.28564911,  0.11886236,
       -0.04123874, -0.1607093 , -0.23757705, -0.28288297, -0.30577595,
       -0.29576802, -0.23722028, -0.13478969, -0.00704045,  0.13301999,
        0.27074586,  0.36728951,  0.37550482,  0.28518522,  0.13766009,
       -0.00310358, -0.09570163, -0.14038226, -0.15444218, -0.14589006,
       -0.11585492, -0.06359865,  0.01840592,  0.12766331,  0.22321684,
        0.24677704,  0.18241153,  0.07075534, -0.03521186, -0.10606452,
       -0.14067264, -0.15454744, -0.15235452, -0.12018364, -0.05488017,
        0.03184061,  0.13184838,  0.22315625,  0.26332795,  0.22602425,
        0.12214942, -0.00757585, -0.11747115, -0.18692104, -0.21538394,
       -0.20406682, -0.1672652 , -0.12912508, -0.08718702, -0.01265484,
        0.10549014,  0.23607682,  0.32069027,  0.31544762,  0.22570366,
        0.10081199, -0.00388422, -0.07435927, -0.14090637, -0.21935557,
       -0.27757804, -0.2757534 , -0.21106667, -0.11207794, -0.00684103,
        0.10342037,  0.24220422,  0.41474983,  0.56921987,  0.63157839,
        0.59858071]), 'peaklist': [12, 27, 42, 55, 68, 82, 99], 'ybeat': [0.44109182556530074, 0.3836628062837156, 0.3755048223581721, 0.24677704300884892, 0.2633279477337538, 0.3206902730928475, 0.6315783903677785], 'rolmean': array([ 0.0198558 ,  0.0198558 ,  0.0198558 ,  0.0198558 ,  0.0198558 ,
        0.0198558 ,  0.0198558 ,  0.03052495,  0.02526186,  0.02228851,
        0.02090064,  0.01933072,  0.01722623,  0.01494388,  0.01288328,
        0.01155833,  0.0105336 ,  0.00849282,  0.00522982,  0.00159083,
       -0.00223778, -0.00638388, -0.01037744, -0.01397314, -0.01726125,
       -0.01968343, -0.02065993, -0.02033753, -0.0189574 , -0.01695199,
       -0.01512653, -0.01354451, -0.01157476, -0.0096456 , -0.00905485,
       -0.00959871, -0.00962964, -0.00837646, -0.00583411, -0.00150027,
        0.00497938,  0.0135421 ,  0.02420116,  0.03619537,  0.04777015,
        0.05798319,  0.06696344,  0.07297656,  0.07137864,  0.05905344,
        0.03873681,  0.017377  ,  0.0011287 , -0.00804258, -0.01196563,
       -0.01276378, -0.01047988, -0.00441255,  0.00543382,  0.01846362,
        0.03211364,  0.04115795,  0.04134511,  0.0330366 ,  0.02037078,
        0.00782235, -0.0022916 , -0.00957956, -0.01380584, -0.01465369,
       -0.01310506, -0.01090529, -0.00809026, -0.0031803 ,  0.00376827,
        0.01027053,  0.01374518,  0.01372381,  0.01230131,  0.01254742,
        0.01542154,  0.01848919,  0.01822441,  0.01332367,  0.00609112,
        0.00062835, -0.00103105, -0.00064346, -0.00078145, -0.00037295,
        0.00589769,  0.02281584,  0.04987415,  0.08305873,  0.0198558 ,
        0.0198558 ,  0.0198558 ,  0.0198558 ,  0.0198558 ,  0.0198558 ,
        0.0198558 ]), 'RR_list': array([750., 750., 650., 650., 700., 850.]), 'RR_diff': masked_array(data=[0.0, 100.0, 0.0, 50.0, 150.0],
             mask=[False, False, False, False, False],
       fill_value=1e+20), 'RR_sqdiff': masked_array(data=[    0., 10000.,     0.,  2500., 22500.],
             mask=False,
       fill_value=1e+20), 'rrsd': 69.2218655243173, 'best': 5, 'peaklist_cor': array([12, 27, 42, 55, 68, 82, 99], dtype=int64), 'removed_beats': array([], dtype=int64), 'removed_beats_y': array([], dtype=float64), 'binary_peaklist': [1, 1, 1, 1, 1, 1, 1], 'rejected_segments': [], 'RR_masklist': [0, 0, 0, 0, 0, 0], 'RR_list_cor': [750.0, 750.0, 650.0, 650.0, 700.0, 850.0], 'nn20': masked_array(data=[100.0, 50.0, 150.0],
             mask=[False, False, False],
       fill_value=1e+20), 'nn50': masked_array(data=[100.0, 150.0],
             mask=[False, False],
       fill_value=1e+20)}
**BPM(beats per minute)：心率，一分钟内的心跳次数**

bpm: 82.75862068965517   

**IBI： 相邻两次脉搏的时间间隔（单位：ms）** **BPM = 60 / IBI**

 ibi: 725.0

**SDNN:全部窦性心搏RR间期（简称NN间期）的标准差。单位为ms 。正常参考值：141±39，另一种标准值是141.7±29.2.**

sdnn: 69.2218655243173



sdsd: 58.309518948453004

**RMSSD:相邻RR间期差值的均方根。正常参考值39.0±15.0**

rmssd: 83.66600265340756



pnn20: 0.6

**PNN50:相邻NN之差>50ms的个数占总窦性心搏个数的百分比。正常参考值：16.7±12.3**

pnn50: 0.4



hr_mad: 50.0

**呼吸率**

breathingrate: 0.39603960396039606

